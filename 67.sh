bash -c 'if command -v dracut >/dev/null 2>&1 && modinfo nvidia >/dev/null 2>&1; then echo "System check passed. Applying fix..."; sudo mkdir -p /etc/modprobe.d /etc/dracut.conf.d && echo "options nvidia_drm modeset=1" | sudo tee /etc/modprobe.d/nvidia-modeset-fix.conf >/dev/null && printf "add_drivers+=\" nvidia nvidia_modeset nvidia_uvm nvidia_drm \"\ninstall_items+=\" /etc/modprobe.d/nvidia-modeset-fix.conf \"\n" | sudo tee /etc/dracut.conf.d/nvidia-modeset-fix.conf >/dev/null && sudo dracut -f && echo -e "\033[0;32mSUCCESS:\033[0m NVIDIA modeset applied to initramfs. Please reboot."; else echo -e "\033[0;31mERROR:\033[0m Dracut or NVIDIA drivers not detected. Fix aborted to prevent system corruption."; fi'
