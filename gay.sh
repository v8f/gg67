sudo bash -c 'echo "Checking requirements..."; command -v dnf >/dev/null && command -v dracut >/dev/null || { echo "Error: System not supported (dnf/dracut missing)."; exit 1; }; rpm -q akmod-nvidia || dnf install -y akmod-nvidia xorg-x11-drv-nvidia-cuda; grep -qF "options nvidia_drm modeset=1" /etc/modprobe.d/nvidia.conf 2>/dev/null || echo "options nvidia_drm modeset=1" >> /etc/modprobe.d/nvidia.conf; grep -qF "add_drivers+=\" nvidia nvidia_modeset nvidia_uvm nvidia_drm \"" /etc/dracut.conf.d/nvidia.conf 2>/dev/null || echo "add_drivers+=\" nvidia nvidia_modeset nvidia_uvm nvidia_drm \"" >> /etc/dracut.conf.d/nvidia.conf; grep -qF "install_items+=\" /etc/modprobe.d/nvidia.conf \"" /etc/dracut.conf.d/nvidia.conf 2>/dev/null || echo "install_items+=\" /etc/modprobe.d/nvidia.conf \"" >> /etc/dracut.conf.d/nvidia.conf; echo "Regenerating initramfs..."; dracut -f && echo "SUCCESS: NVIDIA drivers configured. Please reboot now."'
